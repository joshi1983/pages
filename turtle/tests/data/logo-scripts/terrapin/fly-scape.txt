; copied from: https://resources.terrapinlogo.com/logolib/flyescape.html
   TO SCORE
    MAKE "X 0
    MAKE "T 0
    LABEL "START
    IF (:T = 1) STOP
    WAIT 1000 MAKE "X SUM :X 1
    IF (:T = 1) STOP
    SETPC "SILVER (STAMPOVAL 20 20 "TRUE) SETPC "BLACK
    TT :X
    IF :X = 180 WIN STOP
    GO "START
END

TO COLLISION
    MAKE "C BASECOLOR (DOTCOLOR)
    IF (YCOR < -280) MAKE "C 0 MAKE "T 1
    IF (YCOR > 280) MAKE "C 0 MAKE "T 1
    COLLISION
END

TO CONTROL
    ST
    SETVELOCITY -20
    MAKE "COLLIDER LAUNCH [COLLISION]
    LABEL "CONTROL1
    IF (YCOR < -280) MAKE "C 0
    IF (YCOR > 280) MAKE "C 0
    MAKE "C BASECOLOR (DOTCOLOR)
    IF (:C = 0) CS ENDSCREEN STOP
    MAKE "K RC
    IF :K = "W FD 5
    IF :K = "A SETH 270 FD 5 SETH 0
    IF :K = "D SETH 90 FD 5 SETH 0
    IF :K = "Q (RESTART "TRUE)
    IF (:X = 180) WIN STOP
    IF (YCOR < -280) MAKE "C 0
    IF (YCOR > 280) MAKE "C 0
    IF (:C = 0) CS MAKE "T 1 WAIT 10 ENDSCREEN STOP
    IF :T = 1 CS WAIT 10 ENDSCREEN STOP
    GO "CONTROL1
END

TO FLYPAPER
    WRAP
    MAKE "Y LAUNCH [TOPPAPER]
    MAKE "T LAUNCH [BOTTOMPAPER]
END

TO WIN
    CS
    SETFONT "TIMES 20 1
    SETBG "BLUE
    TELLALL 0 49 PD HT EACH [SETPC WHO SETH WHO * 360 / 50 SETW RANDOM 5 FD RANDOM 300] TT [YAY YOU WIN]
    TELL 0 PU SETPOS [200 -200]
    PD TT [PLAY AGAIN? (Y / N)]
    LABEL "WINAGAIN
    MAKE "E2 RC
    IF :E2 = "Y STARTSCREEN
    IF :E2 = "N (RESTART "TRUE)
    GO "WINAGAIN
END

TO BOTTOMPAPER
    ASK [3 5 7 9 11 13 15 17 19 21] [HT PU SETPOS [620 -290]]
    ASK [3 5 7 9 11 13 15 17 19 21] [EACH [SETH 270 FD (130 * ((WHO - 1) / 2))]]
    LABEL "PAPERSBOTTOM
    ASK [3] [PD (STAMPRECT 130 100 "TRUE)]
    ASK [5] [PD (STAMPRECT 130 210 "TRUE)]
    ASK [7] [PD (STAMPRECT 130 (RANDOM 250) "TRUE)]
    ASK [9] [PD (STAMPRECT 130 160 "TRUE)]
    ASK [11] [PD (STAMPRECT 130 250 "TRUE)]
    ASK [13] [PD (STAMPRECT 130 50 "TRUE)]
    ASK [15] [PD (STAMPRECT 130 90 "TRUE)]
    ASK [17] [PD (STAMPRECT 130 170 "TRUE)]
    ASK [19] [PD (STAMPRECT 130 100 "TRUE)]
    ASK [21] [PD (STAMPRECT 130 230 "TRUE)]
    ASK [3 5 7 9 11 13 15 17 19 21] [WAIT 100]
    IF (:C = 0) STOP
    ASK [3] [PE (STAMPRECT 130 100 "TRUE)]
    ASK [5] [PE (STAMPRECT 130 210 "TRUE)]
    ASK [7] [PE (STAMPRECT 130 250 "TRUE)]
    ASK [9] [PE (STAMPRECT 130 160 "TRUE)]
    ASK [11] [PE (STAMPRECT 130 250 "TRUE)]
    ASK [13] [PE (STAMPRECT 130 50 "TRUE)]
    ASK [15] [PE (STAMPRECT 130 90 "TRUE)]
    ASK [17] [PE (STAMPRECT 130 170 "TRUE)]
    ASK [19] [PE (STAMPRECT 130 100 "TRUE)]
    ASK [21] [PE (STAMPRECT 130 230 "TRUE)]
    ASK [3 5 7 9 11 13 15 17 19 21] [FD 10]
    IF (:X = 179) STOP
    IF (:C = 0) STOP
    GO "PAPERSBOTTOM
END

TO STARTSCREEN
    MAKE "B 0
    TELLALL 0 49 HT SETPC "BLACK
    TELL 0
    CS FS PU HT SETBG "BLUE
    SETPC "BLACK
    SETPOS [-150 200]
    SETFONT "TIMES 60 1
    PD TT LOWERCASE "FLYESCAPE PU
    SETFONT "TIMES 12 0
    SETPOS [-300 110]
    PD TT [USING THE A, W, AND D KEYS TO MOVE UP, LEFT, AND RIGHT, GUIDE YOUR FLY THROUGH] PU
    SETPOS [-330 90]
    PD TT [THE FLY PAPER FOR AS LONG AS POSSIBLE. IF YOU TOUCH THE FLY PAPER, THEN ITS GAME OVER] PU
    SETPOS [-310 70]
    PD TT [FOR THE FLY. SURVIVE FOR 3 MINUTES (180 SCORE) TO WIN THE GAME. 'Q' TO EXIT THE GAME] PU
    SETPOS [-90 0]
    PD TT [PRESS 'X' TO CONTINUE] PU
    SETPOS [62 140]
    PD (STAMPOVAL 18 23 "TRUE)
    SETH 310 REPEAT 2 [FD 20 RT 10] REPEAT 5 [FD 11 RT 41] REPEAT 2 [FD 20 RT 10]
    SETPOS [62 140] SETH 360 REPEAT 2 [FD 20 RT 10] REPEAT 5 [FD 11 RT 41] REPEAT 2 [FD 20 RT 10]
    SETPOS [62 140] SETH 150 SETW 10 FD 25
    PU SETW 1
    LABEL "GAMESTARTER
    MAKE "B RC
    IF :B = "X CS GAME STOP
    GO "GAMESTARTER
END

TO FLYESCAPE
    SETTURTLES 50
    TELL 0 LOADSHAPE [Y / COMPUTERSCIENCEANDPROGRAMMING / LOGO / FLYESCAPE / FLYSHAPE]
    STARTSCREEN
END

TO GAME
    FS
    TELLALL 0 49 EACH [HT SETPC 0 PU]
    MAKE "Z LAUNCH [GAMEBACKGROUND]
    MAKE "S LAUNCH [FLYPAPER]
    TELL 0 CONTROL
    LABEL "WINNING
    IF :X = 180 WIN STOP
    GO "WINNING
END

TO TOPPAPER
    ASK [2 4 6 8 10 12 14 16 18 20] [HT PU SETPOS [620 320]]
    ASK [2 4 6 8 10 12 14 16 18 20] [EACH [SETH 270 FD (130 * ((WHO) / 2))]]
    LABEL "PAPERSTOP
    ASK [2] [PD (STAMPRECT 130 -100 "TRUE)]
    ASK [4] [PD (STAMPRECT 130 -210 "TRUE)]
    ASK [6] [PD (STAMPRECT 130 -170 "TRUE)]
    ASK [8] [PD (STAMPRECT 130 -160 "TRUE)]
    ASK [10] [PD (STAMPRECT 130 -280 "TRUE)]
    ASK [12] [PD (STAMPRECT 130 -300 "TRUE)]
    ASK [14] [PD (STAMPRECT 130 -90 "TRUE)]
    ASK [16] [PD (STAMPRECT 130 -170 "TRUE)]
    ASK [18] [PD (STAMPRECT 130 -100 "TRUE)]
    ASK [20] [PD (STAMPRECT 130 -230 "TRUE)]
    ASK [2 4 6 8 10 12 14 16 18 20] [WAIT 100]
    IF (:C = 0) MAKE "T 1 STOP
    ASK [2] [PE (STAMPRECT 130 -100 "TRUE)]
    ASK [4] [PE (STAMPRECT 130 -210 "TRUE)]
    ASK [6] [PE (STAMPRECT 130 -250 "TRUE)]
    ASK [8] [PE (STAMPRECT 130 -160 "TRUE)]
    ASK [10] [PE (STAMPRECT 130 -280 "TRUE)]
    ASK [12] [PE (STAMPRECT 130 -300 "TRUE)]
    ASK [14] [PE (STAMPRECT 130 -90 "TRUE)]
    ASK [16] [PE (STAMPRECT 130 -170 "TRUE)]
    ASK [18] [PE (STAMPRECT 130 -100 "TRUE)]
    ASK [20] [PE (STAMPRECT 130 -230 "TRUE)]
    ASK [2 4 6 8 10 12 14 16 18 20] [FD 15]
    IF (:X = 179) STOP
    IF (:C = 0) MAKE "T 1 STOP
    GO "PAPERSTOP
END

TO GAMEBACKGROUND
    SETBG "SILVER
    ASK 1 [PU SETPOS [-600 340] PD TT [FLY ESCAPE - A RICKY ORR PRODUCTION - 2008] PU SETPOS [600 -320] PD SCORE]
END

TO ENDSCREEN
    CS FS SETBG 0
    WAIT 100
    SETPC "GRAY
    PU SETPOS [-300 -250] PD (STAMPRECT 600 500 "TRUE)
    SETPC "BLACK
    PU SETPOS [-220 70]
    SETFONT "TIMES 50 1
    PD TT [GAME OVER] PU
    SETPOS [-100 -50]
    SETFONT "TIMES 12 0
    PD TT :X PU SETPOS [-75 -50] PD TT [WAS YOUR SCORE] PU
    SETPOS [-70 -70]
    PD TT [PLAY AGAIN? (Y / N)]
    ;MAKE A SQUISHED FLY
    PU SETPOS [0 100] PD (STAMPOVAL 50 20 "TRUE) SETH 270 FD 70 RT 15 FD 20 RT 60 FD 10 RT 5 FD 29 RT 100 FD 20 RT 26 FD 30 LT 30 FD 10 RT 80 FD 20
    SETPOS [0 100] SETH 90 FD 70 RT 30 FD 10 LT 50 FD 20 LT 100 FD 20 RT 15 FD 10 LT 30 FD 40 LT 90 FD 60
    HT
    LABEL "AGAIN
    MAKE "E RC
    IF :E = "Y MAKE "C "SILVER STARTSCREEN STOP
    IF :E = "N (RESTART "TRUE)
    GO "AGAIN
END

MAKE "A "2
MAKE "B "X
MAKE "C "0
MAKE "E "W
MAKE "K "W
MAKE "S "168
MAKE "T "1
MAKE "X "2
MAKE "Y "169
MAKE "Z "167
MAKE "E2 "Y
MAKE "COLLIDER "171